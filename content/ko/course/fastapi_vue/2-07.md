---
title: 2-07 답변 등록
date: '2023-11-03'
type: book
weight: 4
math: true
tags:
  - Python
  - FastAPI
  - Vue
---

- `완성 소스` : https://github.com/kjrstory/fastapi_vue/tree/v2.07
- `점프 투 FastAPI 문서` : https://wikidocs.net/176499


먼저 점프 투 FastAPI에서 API를 만들고 온다. main.py, frontend/src/lib/api.js도 수정한다.
답변과 질문 스키마 파일도 책에 따라 수정한다.

## 답변 등록 화면

frontend/views/PageDetail.vue 파일을 다음과 같이 수정하자.
```vue{hl_lines=["5-8",46,"35-46"]}
<template>
  <div>
    <h1>{{ question.subject }}</h1>
    <div>{{ question.content }}</div>
    <form @submit.prevent="postAnswer">
      <textarea rows="15" v-model="content"></textarea>
      <input type="submit" value="답변등록">
    </form>
  </div>
</template>

<script>
import fastapi from '../lib/api';

export default {
  props: {
    question_id: {
      type: String,
      required: true
    }
  },
  data() {
    return {
      question: { answers: [] },
      content: "",
    };
  },
  methods: {
    getQuestion() {
      let url = `/api/question/detail/${this.question_id}`
      fastapi('get', url, {}, (json) => {
        this.question = json;
      });
    },
    postAnswer() {
      let url = `/api/answer/create/${this.question_id}`
      let params = {
        content: this.content
      }
      fastapi('post', url, params, () => {
        this.content = ""
        this.error = { detail: [] }
        this.getQuestion()
       },
      )
    },
  },  
  created() {
    this.getQuestion();
  }
}
</script>
```
form 엘리먼트에 @submit.prevent="postAnswer, v-model="content


## 질문 상세 화면에 답변 표시하기


```vue{hl_lines=["5-7"]}
<template>
  <div>
    <h1>{{ question.subject }}</h1>
    <div>{{ question.content }}</div>
    <ul>
    <li v-for="answer in question.answers" :key="answer.id">{{ answer.content }}</li>
    </ul>
    <form @submit.prevent="postAnswer">
      <textarea rows="15" v-model="content"></textarea>
      <input type="submit" value="답변등록">
    </form>
  </div>
</template>
(... 생략 ...)
```

Svelte에 #each에 해당하는 것은 v-for이다. 
