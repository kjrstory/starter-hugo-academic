---
title: 3-16-2 댓글
date: '2021-01-01'
type: book
weight: 42
math: true
tags:
  - Python
  - FastAPI
  - Vue
---

- `완성 소스` : https://github.com/kjrstory/fastapi_vue/tree/v3.16.2
- `점프 투 FastAPI 문서` : https://wikidocs.net/177232



## 댓글 모델
댓글 기능을 구현하기 위해서 models.py에 Comment 모델을 생성한다.


|속성|	설명|
|content|내용|
|question_id|질문 id|
|answer_id|답변 id|
|create_date|생성 시각|
|modify_date|수정 시각|

models.py를 


모델이 바뀌었으니 DB파일을 갱신한다.
```bash
alembic revision --autogenerate
alembic revision --autogenerate
```


## 댓글 API

### 댓글 API 명세
어떤 API를 만들지 부터 구상해보자. 당연히 댓글 생성 API, 댓글 조회 API, 댓글 수정 API, 댓글 삭제 API등이 필요할 것이다. 댓글 목록 API는 필요할수도 있다.
한가지 고려해야할 것이 댓글은 질문에도 달릴 수 있고 답변에도 달릴 수 있다는 것이다. 
모델은 동일하되 생성 API를 두개로 나누었다.

`[API 명세]`

| API명 | URL | 요청 방법 | 설명 |
|---|---|---|---|
| 질문 댓글 생성 | `/api/comment/question/create/{question_id}` | post | 질문 댓글을 등록한다. |
| 답변 댓글 생성 | `/api/comment/answer/create/{answer_id}` | post | 답변 댓글을 등록한다. |
| 댓글 조회 | `/api/comment/update/` | get | 댓글을 조회한다. |
| 댓글 수정 | `/api/comment/update/` | put | 댓글을 수정한다. |
| 댓글 삭제 | `/api/comment/delete/` | delete | 댓글을 삭제한다. |


`[질문 댓글 등록 API 입력 항목]`
- content - 등록할 댓글의 내용

`[질문 댓글 등록 API 출력 항목]`
- 없음

`[답변 댓글 등록 API 입력 항목]`
- content - 등록할 댓글의 내용

`[답변 댓글 등록 API 출력 항목]`
- 없음

`[댓글 조회 API 입력 항목]`
- comment_id - 조회할 댓글의 고유번호
`[댓글 조회 API 출력 항목]`
Comment 스키마

`[댓글 수정 API 입력 항목]`
- comment_id - 수정할 댓글의 고유번호
- content - 수정할 댓글의 내용

`[댓글 수정 API 출력 항목]`
- 없음

`[댓글 삭제 API 입력 항목]`
- comment_id - 수정할 댓글의 고유번호

`[댓글 삭제 API 출력 항목]`
- 없음

