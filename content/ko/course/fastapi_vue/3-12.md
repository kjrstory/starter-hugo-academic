---
title: 3-12 추천
date: '2023-11-01'
type: book
weight: 22
math: true
tags:
  - Python
  - FastAPI
  - Vue
---

- `완성 소스` : https://github.com/kjrstory/fastapi_vue/tree/v3.12
- `점프 투 FastAPI 문서` : https://wikidocs.net/177135


## 1. 추천 버튼 


`[파일명: frontend/src/views/PageDetail.vue]`
```vue
<template>
<div class="container my-3">
    <!-- 질문 -->
    <h2 class="border-bottom py-2">{{ question.subject }}</h2>
    <div class="card my-3">
        <div class="card-body">
(... 생략 ...)
            <button class="btn btn-sm btn-outline-secondary" @click="voteQuestion(question.id)">
               추천
               <span class="badge rounded-pill bg-success">{{ question.voter.length }}</span>
            </button>
            <div class="my-3" v-if="question.user && this.$store.state.username === question.user.username">
               <router-link :to="'/question-modify/' + question.id" class="btn btn-sm btn-outline-secondary">수정</router-link>
               <button class="btn btn-sm btn-outline-secondary" @click="deleteQuestion(question.id)">삭제</button>
            </div>
        </div>
    </div>
(... 생략 ...)

    <!-- 답변 목록 -->
    <h5 class="border-bottom my-3 py-2">{{question.answers.length}}개의 답변이 있습니다.</h5>
    <div v-for="answer in question.answers" :key="answer.id" class="card my-3">
        <div class="card-body">
(... 생략 ...)
           <button class="btn btn-sm btn-outline-secondary" @click="voteAnswer(answer.id)">
               추천
               <span class="badge rounded-pill bg-success">{{ answer.voter.length }}</span>
            </button>
            <div class="my-3" v-if="answer.user && this.$store.state.username === answer.user.username">
               <router-link :to="'/answer-modify/' + answer.id" class="btn btn-sm btn-outline-secondary">수정</router-link>
               <button class="btn btn-sm btn-outline-secondary" @click="deleteAnswer(answer.id)">삭제</button>
            </div>
        </div>
    </div>
(... 생략 ...)
</div>
```

`[파일명: frontend/src/views/PageDetail.vue]`
```vue
<script>
import fastapi from '../lib/api';
import moment from 'moment';
import 'moment/locale/ko';

moment.locale('ko')

export default {
(... 생략 ...)
  methods: {
   voteQuestion(question_id) {
      if(confirm('정말로 추천하시겠습니까?')) {
        let url = "/api/question/vote";
        let params = {
          question_id: question_id
        }
        fastapi('post', url, params, () => {
            this.getQuestion()
        })
      }
    },
    voteAnswer(answer_id) {
      if(confirm('정말로 추천하시겠습니까?')) {
        let url = "/api/answer/vote";
        let params = {
          answer_id: answer_id
        }
        fastapi('post', url, params, () => {
            this.getQuestion()
        })
      }
    }
  },  
  created() {
    this.getQuestion();
  }
}
```
